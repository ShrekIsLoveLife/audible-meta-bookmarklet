<html>
<head>
	<title>Make Bookmarklet</title>

	<script>

     function generateBookmarklet (){

       var title  = document.getElementById("title_in").value;
       var code  = document.getElementById("js_in").value;
       var link  = document.getElementById("bookmarklet-a");
       var html_out  = document.getElementById("html_out");

       var bookmarklet = "javascript:" +  encodeURIComponent("(function(){" + code.trim() +  "})();");
       
       link.text = title;
       link.href = bookmarklet;

       html_out.value = "<a href=\"" + bookmarklet + "\">" + title + "</a>"
       
     }

	</script>
</head>
<body>
	<input id="title_in" value="get meta"></input>
	<textarea id="js_in" style="width: 100%; height: 500px; overflow: scroll;"></textarea>
	<br/>
	<button onclick="generateBookmarklet();">Generate Bookmarklet</button>
	<br/>
	<b>Bookmaklet: </b><a id="bookmarklet-a" class="bookmarklet" href="">bookmarklet</a>
	<br/>
	<textarea id="html_out" style="width: 100%; height: 500px; overflow: scroll;"></textarea>

</body>
</html>